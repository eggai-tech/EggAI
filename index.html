
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="concepts/agent/">
      
      
      <link rel="icon" href="assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>EggAI Multi-Agent Meta Framework</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#multi-agent-meta-framework" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="EggAI Multi-Agent Meta Framework" class="md-header__button md-logo" aria-label="EggAI Multi-Agent Meta Framework" data-md-component="logo">
      
  <img src="assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            EggAI Multi-Agent Meta Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introduction
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="EggAI Multi-Agent Meta Framework" class="md-nav__button md-logo" aria-label="EggAI Multi-Agent Meta Framework" data-md-component="logo">
      
  <img src="assets/logo.png" alt="logo">

    </a>
    EggAI Multi-Agent Meta Framework
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#meta-framework" class="md-nav__link">
    <span class="md-ellipsis">
      Meta Framework
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Meta Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ai-framework-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      AI Framework Integrations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ai-agent-evaluations" class="md-nav__link">
    <span class="md-ellipsis">
      AI Agent Evaluations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eggai-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      EggAI SDK
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EggAI SDK">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Core Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-copypaste" class="md-nav__link">
    <span class="md-ellipsis">
      Why Copy/Paste?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concepts/agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="concepts/multi-agent-system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Agent System
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/coordinator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Coordinator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/websocket_gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Websocket Gateway
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/langchain_tool_calling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LangChain Tool Calling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/shared_context/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shared Context
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/litellm_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LiteLLM Integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/triage_agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Triage agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/multi_agent_conversation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Agent Conversation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/multi_agent_human_chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Agent & Human Chat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/agent_evaluation_dspy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Evaluation & DSPy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/safe_agents_guardrails/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Safe agents & Guardrails
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="examples/dspy_react/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Advanced Agents with DSPy ReAct
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SDK
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sdk/agent/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Agent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sdk/channel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Channel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sdk/message/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="sdk/transport/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transport
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#meta-framework" class="md-nav__link">
    <span class="md-ellipsis">
      Meta Framework
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Meta Framework">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ai-framework-integrations" class="md-nav__link">
    <span class="md-ellipsis">
      AI Framework Integrations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ai-agent-evaluations" class="md-nav__link">
    <span class="md-ellipsis">
      AI Agent Evaluations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#eggai-sdk" class="md-nav__link">
    <span class="md-ellipsis">
      EggAI SDK
    </span>
  </a>
  
    <nav class="md-nav" aria-label="EggAI SDK">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    <span class="md-ellipsis">
      Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    <span class="md-ellipsis">
      Getting Started
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#core-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      Core Concepts
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-copypaste" class="md-nav__link">
    <span class="md-ellipsis">
      Why Copy/Paste?
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<p><img src="assets/eggai-word-and-figuremark.svg" alt="EggAI word and figuremark" width="200px" style="margin-bottom: 16px;" /></p>
<h1 id="multi-agent-meta-framework">Multi-Agent Meta Framework</h1>
<!-- BEGIN INCLUDE ../../README.md '&lt;!--start--&gt;' '&lt;!--end--&gt;' -->

<p><a href="https://www.python.org/downloads/"><img alt="Python 3.x" src="https://img.shields.io/badge/python-3.x-blue?style=for-the-badge&amp;logo=python&amp;logoColor=white" /></a>
<a href="https://opensource.org/licenses/MIT"><img alt="License: MIT" src="https://img.shields.io/badge/License-MIT-green?style=for-the-badge&amp;logo=opensourceinitiative&amp;logoColor=white" /></a>
<a href="https://github.com/eggai-tech/eggai/pulls"><img alt="PRs Welcome" src="https://img.shields.io/badge/PRs-welcome-brightgreen?style=for-the-badge&amp;logo=github&amp;logoColor=white" /></a>
<a href="https://github.com/eggai-tech/eggai/issues"><img alt="GitHub Issues" src="https://img.shields.io/github/issues/eggai-tech/eggai?style=for-the-badge&amp;logo=github&amp;logoColor=white" /></a>
<a href="https://github.com/eggai-tech/eggai/stargazers"><img alt="GitHub Stars" src="https://img.shields.io/github/stars/eggai-tech/eggai?style=for-the-badge&amp;logo=github&amp;logoColor=white" /></a></p>
<p><code>EggAI Multi-Agent Meta Framework</code> makes it easy to build enterprise-grade multi-agent systems with quality-controlled output, using an async-first, distributed and composable architecture. It provides:</p>
<ul>
<li><a href="#examples">Examples</a>: Practical implementation scenarios using popular AI frameworks.</li>
<li><a href="#eggai-sdk">eggai SDK</a>: Slim SDK for asynchronous, distributed multi-agent communication.</li>
</ul>
<h3 id="meta-framework">Meta Framework</h3>
<p>The EggAI Multi-Agent Meta Framework is a framework-agnostic AI orchestration layer designed for flexibility and scalability. It enables seamless integration with popular AI frameworks.</p>
<h4 id="ai-framework-integrations">AI Framework Integrations</h4>
<details>
<summary>DSPy Agent</summary>


<pre><code class="language-python"># Install `eggai` and `dspy` and set OPENAI_API_KEY in the environment

import asyncio
import dspy
from eggai import Agent, Channel, eggai_main

dspy.configure(lm=dspy.LM(&quot;openai/gpt-4o-mini&quot;))
qa_model = dspy.Predict(&quot;question -&gt; answer&quot;)
agent, channel = Agent(&quot;QAAgent&quot;), Channel()

@agent.subscribe(filter_func=lambda event: event.get(&quot;event_name&quot;) == &quot;question_created&quot;)
async def handle_question(event):
    question = event[&quot;payload&quot;][&quot;question&quot;]
    answer = qa_model(question=question).answer
    print(f&quot;[QAAgent] Question: {question} | Answer: {answer}&quot;)

    await channel.publish({
        &quot;event_name&quot;: &quot;answer_generated&quot;,
        &quot;payload&quot;: {&quot;question&quot;: question, &quot;answer&quot;: answer}
    })

@eggai_main
async def main():
    await agent.start()
    await channel.publish({
        &quot;event_name&quot;: &quot;question_created&quot;,
        &quot;payload&quot;: {&quot;question&quot;: &quot;When was the Eiffel Tower built?&quot;}
    })
    await asyncio.Future()

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>

</details>

<details>
<summary>LangChain Agent</summary>


<pre><code class="language-python"># Install `eggai` and `langchain` and set OPENAI_API_KEY in the environment

import asyncio
from langchain.chat_models import ChatOpenAI
from langchain.schema import HumanMessage
from eggai import Agent, Channel, eggai_main

llm = ChatOpenAI(model_name=&quot;gpt-4o&quot;, temperature=0)
agent, channel = Agent(&quot;QAAgent&quot;), Channel()

@agent.subscribe(filter_func=lambda event: event.get(&quot;event_name&quot;) == &quot;question_created&quot;)
async def handle_question(event):
    question = event[&quot;payload&quot;][&quot;question&quot;]
    answer = llm([HumanMessage(content=question)]).content

    print(f&quot;[QAAgent] Question: {question} | Answer: {answer}&quot;)

    await channel.publish({
        &quot;event_name&quot;: &quot;answer_generated&quot;,
        &quot;payload&quot;: {&quot;question&quot;: question, &quot;answer&quot;: answer}
    })

@eggai_main
async def main():
    await agent.start()
    await channel.publish({
        &quot;event_name&quot;: &quot;question_created&quot;,
        &quot;payload&quot;: {&quot;question&quot;: &quot;When was the Eiffel Tower built?&quot;}
    })
    await asyncio.Future()

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>

</details>

<details>
<summary>LiteLLM Agent</summary>


<pre><code class="language-python"># Install `eggai` and `litellm` and set OPENAI_API_KEY in the environment

import asyncio
import litellm
from eggai import Agent, Channel, eggai_main

litellm.model = &quot;gpt-4o&quot;
agent, channel = Agent(&quot;QAAgent&quot;), Channel()

@agent.subscribe(filter_func=lambda event: event.get(&quot;event_name&quot;) == &quot;question_created&quot;)
async def handle_question(event):
    question = event[&quot;payload&quot;][&quot;question&quot;]
    answer = litellm.completion(model=litellm.model, messages=[{&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: question}])[&quot;choices&quot;][0][&quot;message&quot;][&quot;content&quot;]

    print(f&quot;[QAAgent] Question: {question} | Answer: {answer}&quot;)

    await channel.publish({
        &quot;event_name&quot;: &quot;answer_generated&quot;,
        &quot;payload&quot;: {&quot;question&quot;: question, &quot;answer&quot;: answer}
    })

@eggai_main
async def main():
    await agent.start()
    await channel.publish({
        &quot;event_name&quot;: &quot;question_created&quot;,
        &quot;payload&quot;: {&quot;question&quot;: &quot;When was the Eiffel Tower built?&quot;}
    })
    await asyncio.Future()

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>

</details>

<details>
<summary>LlamaIndex Agent</summary>


<pre><code class="language-python"># Install `eggai` and `llama_index` and set OPENAI_API_KEY in the environment

import asyncio
from llama_index.llms.openai import OpenAI
from eggai import Agent, Channel, eggai_main

llm = OpenAI(model=&quot;gpt-4o&quot;)
agent, channel = Agent(&quot;QAAgent&quot;), Channel()

@agent.subscribe(filter_func=lambda event: event.get(&quot;event_name&quot;) == &quot;question_created&quot;)
async def handle_question(event):
    question = event[&quot;payload&quot;][&quot;question&quot;]
    answer = llm.complete(question).text

    print(f&quot;[QAAgent] Question: {question} | Answer: {answer}&quot;)

    await channel.publish({
        &quot;event_name&quot;: &quot;answer_generated&quot;,
        &quot;payload&quot;: {&quot;question&quot;: question, &quot;answer&quot;: answer}
    })

@eggai_main
async def main():
    await agent.start()
    await channel.publish({
        &quot;event_name&quot;: &quot;question_created&quot;,
        &quot;payload&quot;: {&quot;question&quot;: &quot;When was the Eiffel Tower built?&quot;}
    })
    await asyncio.Future()

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>

</details>

<h4 id="ai-agent-evaluations">AI Agent Evaluations</h4>
<details>
<summary>Agent Evaluation using LLM as a Judge metrics</summary>


<pre><code class="language-python"># Install `eggai` and `dspy` and set OPENAI_API_KEY in the environment
# Make sure to have the agent implementation in the `agent.py` file defined

import asyncio
import pytest
import dspy
from agent import agent
from eggai import Agent, Channel

dspy.configure(lm=dspy.LM(&quot;openai/gpt-4o-mini&quot;))

ground_truth = [
    {&quot;question&quot;: &quot;When was the Eiffel Tower built?&quot;, &quot;answer&quot;: &quot;The Eiffel Tower was built between 1887 and 1889.&quot;},
    {&quot;question&quot;: &quot;Who wrote Hamlet?&quot;, &quot;answer&quot;: &quot;Hamlet was written by William Shakespeare.&quot;},
    {&quot;question&quot;: &quot;What is the capital of France?&quot;, &quot;answer&quot;: &quot;The capital of France is Paris.&quot;},
]

class EvaluationSignature(dspy.Signature):
    question: str = dspy.InputField(desc=&quot;Ground truth question.&quot;)
    agent_answer: str = dspy.InputField(desc=&quot;Agent-generated answer.&quot;)
    ground_truth_answer: str = dspy.InputField(desc=&quot;Expected correct answer.&quot;)

    judgment: bool = dspy.OutputField(desc=&quot;Pass (True) or Fail (False).&quot;)
    reasoning: str = dspy.OutputField(desc=&quot;Detailed justification in Markdown.&quot;)
    precision_score: float = dspy.OutputField(desc=&quot;Precision score (0.0 to 1.0).&quot;)

test_agent = Agent(&quot;TestAgent&quot;)
test_channel = Channel()
event_received = asyncio.Event()
received_event = None

@test_agent.subscribe(filter_func=lambda event: event.get(&quot;event_name&quot;) == &quot;answer_generated&quot;)
async def handle_answer(event):
    global received_event
    received_event = event
    event_received.set()

@pytest.mark.asyncio
async def test_qa_agent():
    await agent.start()
    await test_agent.start()

    for item in ground_truth:
        event_received.clear()

        await test_channel.publish({&quot;event_name&quot;: &quot;question_created&quot;, &quot;payload&quot;: {&quot;question&quot;: item[&quot;question&quot;]}})

        try:
            await asyncio.wait_for(event_received.wait(), timeout=5.0)
        except asyncio.TimeoutError:
            pytest.fail(f&quot;Timeout: No 'answer_generated' event was published for question: {item['question']}&quot;)

        assert received_event is not None, &quot;No 'answer_generated' event was received.&quot;
        assert received_event[&quot;event_name&quot;] == &quot;answer_generated&quot;, &quot;Unexpected event type received.&quot;
        assert &quot;answer&quot; in received_event[&quot;payload&quot;], &quot;The 'answer' key is missing in the payload.&quot;

        agent_answer = received_event[&quot;payload&quot;][&quot;answer&quot;]
        question = received_event[&quot;payload&quot;][&quot;question&quot;]
        ground_truth_answer = item[&quot;answer&quot;]

        assert question == item[&quot;question&quot;], f&quot;Incorrect question in the answer payload: {question}&quot;

        eval_model = dspy.asyncify(dspy.Predict(EvaluationSignature))
        evaluation_result = await eval_model(
            question=question,
            agent_answer=agent_answer,
            ground_truth_answer=ground_truth_answer
        )

        assert isinstance(evaluation_result.judgment, bool), &quot;Judgment must be a boolean.&quot;
        assert isinstance(evaluation_result.reasoning, str), &quot;Reasoning must be a string.&quot;
        assert isinstance(evaluation_result.precision_score, float), &quot;Precision score must be a float.&quot;
        assert 0.8 &lt;= evaluation_result.precision_score &lt;= 1.0, &quot;Precision score must be between 0.8 and 1.0.&quot;
</code></pre>

</details>

<h2 id="examples">Examples</h2>
<p>Practical implementation scenarios and integration guides with popular AI frameworks. We encourage you to explore and <strong>copy/paste</strong> from our examples for your projects.</p>
<p>If you're new to EggAI, we recommend starting with the <a href="../../examples/getting_started">Getting Started</a> example to learn the basics. If you want to see a more extensive multi-agent system in action, check out the <a href="../../examples/multi_agent_human_chat">Multi-Agent Insurance Support System</a> example.</p>
<table style="width: 100%;">
  <tbody>
    <tr>
      <td style="width: 15%;">
        <a href="examples/getting_started">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/example-00.png" alt="Getting Started" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/getting_started"><strong>Getting Started</strong></a><br/>
        Orchestrate two agents asynchronously.<br/>
        <small>Tags: Communication</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/coordinator">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/example-01.png" alt="Coordinator" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/coordinator"><strong>Coordinator</strong></a><br/>
        Bridge multiple communication channels.<br/>
        <small>Tags: Communication, Pattern</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/websocket_gateway">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/example-02.png" alt="Websocket Gateway" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/websocket_gateway"><strong>Websocket Gateway</strong></a><br/>
        Real-time interaction via WebSockets.<br/>
        <small>Tags: Communication, Realtime</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/dspy_react">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/react-agent-dspy.png" alt="DSPy ReAct" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/dspy_react"><strong>DSPy ReAct Agent</strong></a><br/>
        Advanced Agents with DSPy ReAct.<br/>
        <small>Tags: DSPy, Tool Calling, React</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/langchain_tool_calling">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/example-03.png" alt="LangChain Tool Calling" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/langchain_tool_calling"><strong>LangChain Agent</strong></a><br/>
        Integrate tool calling with LangChain.<br/>
        <small>Tags: Tool Calling, LangChain</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/litellm_agent">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/example-05.png" alt="LiteLLM Agent" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/litellm_agent"><strong>LiteLLM Agent</strong></a><br/>
        Power agents with LiteLLM.<br/>
        <small>Tags: LiteLLM</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/agent_evaluation_dspy">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/agent-evaluation-dspy.png" alt="Agent Evaluation & DSPy" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/agent_evaluation_dspy"><strong>Agent Evaluation & Optimization with DSPy</strong></a><br/>
        Data-driven development with DSPy.<br/>
        <small>Tags: DSPy, Evaluation, Optimization</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/safe_agents_guardrails">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/safe-agents-guardrails.png" alt="Safe Agents with Guardrails AI" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/safe_agents_guardrails"><strong>Safe Agents with Guardrails AI</strong></a><br/>
        Guarding LLM agents against toxicity and PII leakage.<br/>
        <small>Tags: DSPy, Guardrails</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/triage_agent">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/triage-agent.png" alt="Triage Agent" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/triage_agent"><strong>Triage Agent</strong></a><br/>
        Triage Agent with classification and routing.<br/>
        <small>Tags: Classification, Routing</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/shared_context">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/example-04.png" alt="Shared Context" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/shared_context"><strong>Shared Context</strong></a><br/>
        Maintain shared context across agents.<br/>
        <small>Tags: Communication, Memory</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/multi_agent_conversation">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/example-06.png" alt="Multi-Agent Conversation" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/multi_agent_conversation"><strong>Multi-Agent Conversation</strong></a><br/>
        Context-aware multi-agent conversations.<br/>
        <small>Tags: Communication, Classification, Routing, Chat</small>
      </td>
    </tr>
    <tr>
      <td>
        <a href="examples/multi_agent_human_chat">
          <img src="https://raw.githubusercontent.com/eggai-tech/EggAI/refs/heads/main/docs/docs/assets/multi-agent-human-chat.png" alt="Multi-Agent Insurance Support System" width="80"/>
        </a>
      </td>
      <td>
        <a href="examples/multi_agent_human_chat"><strong>Multi-Agent Insurance Support System</strong></a><br/>
        Insurance support system with a support chat UI.<br/>
        <small>Tags: Communication, Realtime, Classification, Routing, Chat</small>
      </td>
    </tr>
  </tbody>
</table>

<h2 id="eggai-sdk">EggAI SDK</h2>
<p><strong>EggAI SDK</strong> includes components like <code>Agent</code> and <code>Channel</code> for decoupled communication in multi-agent systems. Its slim design offers flexibility for enterprise-grade applications and seamless integration with popular AI frameworks such as <a href="https://dspy.ai/">DSPy</a>, <a href="https://www.langchain.com/">LangChain</a>, and <a href="https://www.llamaindex.ai/">LlamaIndex</a>.</p>
<h3 id="installation">Installation</h3>
<p>Install <code>eggai</code> via pip:</p>
<pre><code class="language-bash">pip install eggai
</code></pre>
<h3 id="getting-started">Getting Started</h3>
<p>Here's how you can quickly set up an agent to handle events in an event-driven system:</p>
<pre><code class="language-python">import asyncio

from eggai import Agent, Channel, eggai_main

agent = Agent(&quot;OrderAgent&quot;)
channel = Channel()

@agent.subscribe(filter_func=lambda e: e.get(&quot;event_name&quot;) == &quot;order_requested&quot;)
async def handle_order_requested(event):
    print(f&quot;[ORDER AGENT]: Received order request. Event: {event}&quot;)
    await channel.publish({&quot;event_name&quot;: &quot;order_created&quot;, &quot;payload&quot;: event})


@agent.subscribe(filter_func=lambda e: e.get(&quot;event_name&quot;) == &quot;order_created&quot;)
async def handle_order_created(event):
    print(f&quot;[ORDER AGENT]: Order created. Event: {event}&quot;)


@eggai_main
async def main():
    await agent.start()
    await channel.publish({
        &quot;event_name&quot;: &quot;order_requested&quot;,
        &quot;payload&quot;: {
            &quot;product&quot;: &quot;Laptop&quot;,
            &quot;quantity&quot;: 1
        }
    })

    await asyncio.Future() # Keep the event loop running

if __name__ == &quot;__main__&quot;:
    asyncio.run(main())
</code></pre>
<p>Copy this snippet into your project, customize it, and you’re good to go!</p>
<h3 id="core-concepts">Core Concepts</h3>
<p>An <code>Agent</code> is an autonomous unit of business logic designed to orchestrate workflows, process events, and communicate with external systems such as Large Language Models (LLMs) and APIs. It reduces boilerplate code while supporting complex and long-running workflows. Key features include:</p>
<ul>
<li><strong>Event Handling</strong>: Use the <code>subscribe</code> decorator to bind user-defined handlers to specific events.</li>
<li><strong>Workflow Orchestration</strong>: Manage long-running workflows and tasks efficiently.</li>
<li><strong>External System Communication</strong>: Seamlessly interact with Large Language Models (LLMs), external APIs, and other systems.</li>
<li><strong>Lifecycle Management</strong>: Automatically handle the lifecycle of Kafka consumers, producers, and other connected components.</li>
<li><strong>Boilerplate Reduction</strong>: Focus on core business logic while leveraging built-in integrations for messaging and workflows.</li>
</ul>
<p>A <code>Channel</code> is the foundational communication layer that facilitates both event publishing and subscription.
It abstracts Kafka producers and consumers, enabling efficient and flexible event-driven operations. Key features include:</p>
<ul>
<li><strong>Event Communication</strong>: Publish events to Kafka topics with ease.</li>
<li><strong>Event Subscription</strong>: Subscribe to Kafka topics and process events directly through the <code>Channel</code>.</li>
<li><strong>Shared Resources</strong>: Optimize resource usage by managing singleton Kafka producers and consumers across multiple agents or channels.</li>
<li><strong>Seamless Integration</strong>: Act as a communication hub, supporting both Agents and other system components.</li>
<li><strong>Flexibility</strong>: Allow Agents to leverage Channels for both publishing and subscribing, reducing complexity and duplication.</li>
</ul>
<h3 id="why-copypaste">Why Copy/Paste?</h3>
<p><strong>1. Full Ownership and Control</strong><br />
By copying and pasting, you have direct access to the underlying implementation. Tweak or rewrite as you see fit, the code is truly yours.</p>
<p><strong>2. Separation of Concerns</strong><br />
Just like decoupling design from implementation, copying code (rather than installing a monolithic dependency) reduces friction if you want to restyle or refactor how agents are structured.</p>
<p><strong>3. Flexibility</strong><br />
Not everyone wants a one-size-fits-all library. With copy/paste “recipes,” you can integrate only the parts you need.</p>
<p><strong>4. No Hidden Coupling</strong><br />
Sometimes, prepackaged frameworks lock in design decisions. By copying from examples, you choose exactly what gets included and how it’s used.</p>
<!-- END INCLUDE -->












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 EggAI Technologies GmbH
    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.expand"], "search": "assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
    
  </body>
</html>